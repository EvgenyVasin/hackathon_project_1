<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>

    <title th:text="#{navMenu.home}"/>

    <!--/*/ <th:block th:include="fragments/headerinc :: head"></th:block> /*/-->
    <!--/*/ <th:block th:include="fragments/header :: header"></th:block> /*/-->
    <!--/*/ <th:block th:include="fragments/user_menu :: user_menu"></th:block> /*/--><!--/*/ <th:block th:include="fragments/user_menu :: user_menu"></th:block> /*/-->
</head>
<body>
<div class="container">
    <form role="form"  th:action="@{/editUser}" method="post" enctype="multipart/form-data">
        <input type="hidden" name="userId" th:value="${session.currentUser.id}"/>
        <div class="input-group">
                                    <span class="input-group-addon"><span
                                            class="glyphicon glyphicon-picture"></span></span>
            <label class="file_upload" required="False">
                <mark th:if="${not #strings.isEmpty(session.currentUser.image)}" th:text="${session.currentUser.image.imgLink}"></mark>
                <mark th:if="${#strings.isEmpty(session.currentUser.image)}" th:text="#{users.avatar}"></mark>

                <input type="file" name="img" th:placeholder="#{users.avatar}"/>
            </label>
            <script >
                $(function () {
                    var wrapper = $(".file_upload"),
                            inp = wrapper.find("input"),
                            lbl = wrapper.find("mark");

                    // Crutches for the :focus style:
                    inp.focus(function () {
                        wrapper.addClass("focus");
                    }).blur(function () {
                        wrapper.removeClass("focus");
                    });

                    inp.change(function () {

                        if (inp[0].files[0])
                            file_name = inp[0].files[0].name;
                        else
                            file_name = inp.val().replace("C:\\fakepath\\", '');

                        if (!file_name.length)
                            return;

                        if (lbl.is(":visible")) {
                            lbl.text(file_name);

                        }
                    }).change();

                });
                $(window).resize(function () {
                    $(".file_upload input").triggerHandler("change");
                });
            </script>
        </div>
        <div class="input-group">
                                    <span class="input-group-addon"><span
                                            class="glyphicon glyphicon-list-alt"></span></span>
            <input type="text" class="form-control" name="first_name"
                   th:placeholder="#{users.firstName}" th:value="${session.currentUser.firstName}" autofocus = "True"/>
        </div>
        <div class="input-group">
                                    <span class="input-group-addon"><span
                                            class="glyphicon glyphicon-list-alt"></span></span>
            <input type="text" class="form-control" name="last_name"
                   th:placeholder="#{users.lastName}" th:value="${session.currentUser.lastName}"/>
        </div>
        <div class="input-group">
                                        <span class="input-group-addon"><span
                                                class="glyphicon glyphicon-list-alt"></span></span>
            <input type="email" class="form-control rounded" name="email" th:placeholder="#{users.eMail}" th:value="${user.mail}"/>
        </div>
        <div class="form-group">
            <button type="submit" class="btn btn-success" data-original-title="" title="">OK</button>
        </div>
    </form>

</div>

</body>
</html>